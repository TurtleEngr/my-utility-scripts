<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>sshagent</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#OPTIONS">OPTIONS</a></li>
  <li><a href="#RETURN-VALUE">RETURN VALUE</a></li>
  <li><a href="#ERRORS">ERRORS</a></li>
  <li><a href="#EXAMPLES">EXAMPLES</a></li>
  <li><a href="#ENVIRONMENT">ENVIRONMENT</a></li>
  <li><a href="#FILES">FILES</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#NOTES">NOTES</a></li>
  <li><a href="#CAVEATS">CAVEATS</a></li>
  <li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li>
  <li><a href="#BUGS">BUGS</a></li>
  <li><a href="#RESTRICTIONS">RESTRICTIONS</a></li>
  <li><a href="#AUTHOR">AUTHOR</a></li>
  <li><a href="#HISTORY">HISTORY</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>sshagent - setup the ssh agent process</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code> . sshagent [-h] [-s] [-k] [key ...]</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>sshagent is a wrapper for ssh-agent and ssh-add. It only starts an agent process if one isn&#39;t already running. It also saves the PID env. var. values for scripts. Typically sshagent is put in a users profile file. Notice that the script is &quot;sourced&quot; (.) so that the env. var. are defined in the current shell.</p>

<p>For the best use of ssh-agent, put your public keys in the ~/.ssh/authorized_keys file on all the systems that you have login access to.</p>

<p>If an agent is found, then the env. var. are set, and the keys are listed (after adding any keys specified on the command line). If an agent is not found, all other agents are killed, and a new agent is initialized, the keys are added, and the env. var. are set.</p>

<p>If -s is used and an agent isn&#39;t running, then unset SSH_AGENT_PID, and exit (don&#39;t try to start an agent). This is commonly used in cron job scripts.</p>

<p>If cgAgentOwner env. is set, then that will be used instead of $LOGNAME, to find the sshagent.env file. This is useful for scripts that are run by other users, who have read access to the user&#39;s home dir (usually only the &quot;root&quot; user). /home/$cgAgentOwner/.ssh/.sshagent.env file. (The script just &quot;sources&quot; the file.)</p>

<h1 id="OPTIONS">OPTIONS</h1>

<dl>

<dt id="h"><b>-h</b></dt>
<dd>

<p>This help.</p>

</dd>
<dt id="s"><b>-s</b></dt>
<dd>

<p>Only set env. var. (don&#39;t run a new agent).</p>

</dd>
<dt id="k"><b>-k</b></dt>
<dd>

<p>Kill all agents owned by you.</p>

</dd>
<dt id="key"><b>key...</b></dt>
<dd>

<p>A list of key file names.</p>

</dd>
</dl>

<h1 id="RETURN-VALUE">RETURN VALUE</h1>

<h1 id="ERRORS">ERRORS</h1>

<h1 id="EXAMPLES">EXAMPLES</h1>

<p>In a profile script:</p>

<pre><code>        . sshagent ~/.ssh/id.home ~/.ssh/id.work</code></pre>

<p>In a script run by the &#39;root&#39; user:</p>

<pre><code>        export $cgAgentOwner=george
        . sshagent -s</code></pre>

<p>You ran sshagent manually to create an agent, but you forgot to &quot;source&quot; the script so that the SSH_* env. are set. Fix this by just running sshagent again: . sshagent</p>

<p>Add another key to a running agent:</p>

<pre><code>        sshagent ~/.ssh/id_foo_dsa</code></pre>

<p>List agent and added keys:</p>

<pre><code>        sshagent</code></pre>

<p>Kill all agents:</p>

<pre><code>        sshagent -k</code></pre>

<h1 id="ENVIRONMENT">ENVIRONMENT</h1>

<pre><code> $cgAgentOwner - user name.  Set to $LOGNAME if empty.

 $SSH_AUTH_SOCK - set by sshagent
 $SSH_AGENT_PID - set by sshagent</code></pre>

<h1 id="FILES">FILES</h1>

<pre><code> /home/$LOGNAME/.ssh/.sshagent.env
 /home/$cgAgentOwner/.ssh/.sshagent.env</code></pre>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<pre><code> ssh-agent, ssh-add</code></pre>

<h1 id="NOTES">NOTES</h1>

<p>Because this script is usually sourced, exits and functions are not used. So that is why the &quot;if&quot; logic in this script is so messy with the pExit flag.</p>

<h1 id="CAVEATS">CAVEATS</h1>

<h1 id="DIAGNOSTICS">DIAGNOSTICS</h1>

<h1 id="BUGS">BUGS</h1>

<h1 id="RESTRICTIONS">RESTRICTIONS</h1>

<p>sshagent only works well with bash.</p>

<h1 id="AUTHOR">AUTHOR</h1>

<h1 id="HISTORY">HISTORY</h1>

<p>(c) Copyright 2009 by TrustedID</p>

<p>$Revision: 1.58 $ GMT</p>


</body>

</html>


