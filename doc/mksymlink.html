<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>mksymlink</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME-mksymlink">NAME mksymlink</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#OPTIONS">OPTIONS</a>
    <ul>
      <li><a href="#Globals">Globals</a></li>
    </ul>
  </li>
  <li><a href="#RETURN-VALUE">RETURN VALUE</a></li>
  <li><a href="#ERRORS">ERRORS</a></li>
  <li><a href="#EXAMPLES">EXAMPLES</a></li>
  <li><a href="#ENVIRONMENT">ENVIRONMENT</a></li>
  <li><a href="#SEE-ALSO">SEE ALSO</a></li>
  <li><a href="#DIAGNOSTICS">DIAGNOSTICS</a></li>
  <li><a href="#BUGS">BUGS</a></li>
  <li><a href="#HISTORY">HISTORY</a></li>
</ul>

<hr/>

<h1 id="NAME-mksymlink">NAME mksymlink</h1>

<p>Save and restore symlinks to/from .symlink.$HOSTNAME definition files.</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>        mksymlink [-s] [-r] [-c] [-f]
                  [-h] [-H pStyle] [-v] [-x] [-T pTest]</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>CVS does not save symlinks. git saves symlinks, but they may not work. This tool will save symlink definitions, in the current directory, and save them in host-specific files named .symlink.$HOSTNAME (-s).</p>

<p>Then the tool can be used to restore (-r) or check (-c) the symlinks in the current directory against the .symlink.$HOSTNAME file. If you are on a different host, then copy from an existing .symlink.* file and use the check (-c) option to see if it will work, and adjust as needed.</p>

<h1 id="OPTIONS">OPTIONS</h1>

<dl>

<dt id="s"><b>-s</b></dt>
<dd>

<p>Save symlinks to .symlink.$HOSTNAME</p>

<p>Convert $HOME/ in links to &#39;~/&#39;.</p>

<p>Only file symlinks are saved. Directory symlinks are ignored (notice output).</p>

<p>Only current dir symlinks are saved.</p>

<p>Symlink pointing to missing files will not be saved (warning output)</p>

<p>Overwrites the contents of .symlink.$HOSTNAME, so you should do -c and -r first to not loose links. Also version the .symlink.$HOSTNAME files before updating them.</p>

</dd>
<dt id="r"><b>-r</b></dt>
<dd>

<p>Restore symlinks defined in .symlink.$HOSTNAME</p>

<p>Skip the ones were the destination file does not exist.</p>

<p>Skip symlinks that are already defined, unless -f option is used.</p>

<p>Error if .symlink.$HOSTNAME is missing.</p>

</dd>
<dt id="c"><b>-c</b></dt>
<dd>

<p>Check simlinks.</p>

<p>Warning if an existing symlink does not point to an existing file (or directory).</p>

<p>Warning if links in .symlink.$HOSTNAME are not defined in current dir.</p>

<p>Warning if files are not found for the links in .symlink.$HOSTNAME.</p>

<p>Error if .symlink.$HOSTNAME is missing.</p>

</dd>
<dt id="h"><b>-h</b></dt>
<dd>

<p>Output this &quot;long&quot; usage help. See &quot;-H long&quot;</p>

</dd>
<dt id="H-pStyle"><b>-H pStyle</b></dt>
<dd>

<p>pStyle is used to select the type of help and how it is formatted.</p>

<p>Styles:</p>

<pre><code>        short|usage - Output short usage help as text.
        long|text   - Output long usage help as text.
        man         - Output long usage help as a man page.
        html        - Output long usage help as html.
        md          - Output long usage help as markdown.
        int         - Also output internal documentation as text.
        int-html    - Also output internal documentation as html.
        int-md      - Also output internal documentation as markdown.</code></pre>

</dd>
<dt id="v"><b>-v</b></dt>
<dd>

<p>Verbose output. Default is is only output (or log) messages with level &quot;warning&quot; and higher.</p>

<p>-v - output &quot;notice&quot; and higher.</p>

<p>-vv - output &quot;info&quot; and higher.</p>

</dd>
<dt id="x"><b>-x</b></dt>
<dd>

<p>Set the gpDebug level. Add 1 for each -x. Or you can set gpDebug before running the script.</p>

<p>Only show what would be done, when using the other options.</p>

<p>See: fLog and fLog2 (Internal documentation)</p>

</dd>
<dt id="T-pTest"><b>-T pTest</b></dt>
<dd>

<p>Run the unit test functions in this script.</p>

<p>&quot;-T all&quot; will run all of the functions that begin with &quot;test&quot;. Otherwise &quot;pTest&quot; should match the test function names separated with spaces (between quotes).</p>

<p>&quot;-T list&quot; will list all of the test functions.</p>

<p>&quot;-T com&quot; will run all the tests for bash-com.inc</p>

<p>For more details about shunit2 (or shunit2.1), see shunit2/shunit2-manual.html <a href="https://github.com/kward/shunit2">Source</a></p>

<p>See shunit2, shunit2.1</p>

<p>Also for more help, use the &quot;-H int&quot; option.</p>

</dd>
</dl>

<h2 id="Globals">Globals</h2>

<p>These are globals that may affect how the script runs. Just about all of these globals that begin with &quot;gp&quot; can be set and exported before the script is run. That way you can set your own defaults, by putting them in your ~/.bashrc or ~/.bash_profile files.</p>

<p>The the &quot;common&quot; CLI flags will override the initial variable settings.</p>

<dl>

<dt id="Tmp"><b>Tmp</b></dt>
<dd>

<p>This is the top directory where tmp file will be put.</p>

<p>Default: /tmp/$USER/mksymlink/</p>

<p>if gpDebug is 0, temp files will usually include the PID.</p>

</dd>
<dt id="gpVerbose"><b>gpVerbose</b></dt>
<dd>

<p>If set to 0, only log message at &quot;warning&quot; level and above will be output.</p>

<p>If set to 1, all non-debug messages will be output.</p>

<p>See -v, fLog</p>

<p>Default: 0</p>

</dd>
<dt id="gpDebug"><b>gpDebug</b></dt>
<dd>

<p>If set to 0, all &quot;debug&quot; and &quot;debug-N&quot; level messages will be skipped.</p>

<p>If not 0, all &quot;debug&quot; level messages will be output.</p>

<p>Or if &quot;debug-N&quot; level is used, then if gpDebug is &lt;= N, then the log message will be output, otherwise it is skipped.</p>

<p>See -x</p>

</dd>
</dl>

<h1 id="RETURN-VALUE">RETURN VALUE</h1>

<p>0 if OK</p>

<p>!0 if Errors</p>

<h1 id="ERRORS">ERRORS</h1>

<p>Fatal Error:</p>

<p>Warning:</p>

<p>Many error messages may describe where the error is located, with the following log message format:</p>

<pre><code> Program: PID NNNN: Message [LINE](ErrNo)</code></pre>

<h1 id="EXAMPLES">EXAMPLES</h1>

<h1 id="ENVIRONMENT">ENVIRONMENT</h1>

<p>See Globals section for details.</p>

<p>HOME, HOSTNAME, gpVerbose, gpDebug</p>

<h1 id="SEE-ALSO">SEE ALSO</h1>

<p>shunit2.1 bash-com.inc bash-com.test</p>

<h1 id="DIAGNOSTICS">DIAGNOSTICS</h1>

<p>To verify the script is internally OK, run: mksymlink -T all</p>

<h1 id="BUGS">BUGS</h1>

<p>Dir symlinks are not saved. (why not?)</p>

<h1 id="HISTORY">HISTORY</h1>

<p>GPLv3 (c) Copyright 2022</p>


</body>

</html>


